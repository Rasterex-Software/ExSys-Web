<div class="compare-panel-wrapper noselect" [class.expanded-view]="isExpandedView" [ngStyle]="{ 'width': panelWidth }">
    <div *ngIf="!isExpandedView" class="divider" (mousedown)="startAdjusting($event)"></div>

    <div *ngIf="isExpandedView" style="position: absolute; top:0; left: 0; width: 100%; height: 100%; backdrop-filter: blur(2px);"></div>
    <div class="compare-panel">

        <div class="header-wrapper">
            <div class="compare-panel-header">
                <svg width="148" height="13" viewBox="0 0 148 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1.144 12.112C0.877333 12.112 0.669333 12.0373 0.52 11.888C0.381333 11.7387 0.312 11.5307 0.312 11.264V1.568C0.312 1.29067 0.386667 1.08267 0.536 0.943999C0.685333 0.794666 0.893333 0.719999 1.16 0.719999H4.984C6.2 0.719999 7.13867 1.008 7.8 1.584C8.46133 2.16 8.792 2.976 8.792 4.032C8.792 4.71467 8.64267 5.30133 8.344 5.792C8.04533 6.28267 7.608 6.656 7.032 6.912C6.46667 7.168 5.784 7.296 4.984 7.296L5.128 7.072H5.544C5.97067 7.072 6.33867 7.17867 6.648 7.392C6.968 7.60533 7.256 7.94667 7.512 8.416L8.888 10.976C8.99467 11.168 9.04267 11.3547 9.032 11.536C9.032 11.7067 8.968 11.8453 8.84 11.952C8.72267 12.0587 8.552 12.112 8.328 12.112C8.09333 12.112 7.90133 12.064 7.752 11.968C7.61333 11.8613 7.48533 11.7067 7.368 11.504L5.688 8.4C5.464 7.984 5.208 7.70667 4.92 7.568C4.632 7.41867 4.25333 7.344 3.784 7.344H1.976V11.264C1.976 11.5307 1.90667 11.7387 1.768 11.888C1.62933 12.0373 1.42133 12.112 1.144 12.112ZM1.976 6.096H4.712C5.52267 6.096 6.136 5.92533 6.552 5.584C6.968 5.24267 7.176 4.736 7.176 4.064C7.176 3.40267 6.968 2.90133 6.552 2.56C6.136 2.21867 5.52267 2.048 4.712 2.048H1.976V6.096ZM10.8886 12.112C10.6753 12.112 10.5046 12.064 10.3766 11.968C10.2486 11.872 10.174 11.744 10.1526 11.584C10.1313 11.424 10.1633 11.2427 10.2486 11.04L14.5846 1.312C14.6913 1.056 14.8246 0.874666 14.9846 0.768C15.1553 0.661333 15.342 0.608 15.5446 0.608C15.7366 0.608 15.9126 0.661333 16.0726 0.768C16.2433 0.874666 16.382 1.056 16.4886 1.312L20.8246 11.04C20.9206 11.2427 20.958 11.4293 20.9366 11.6C20.9153 11.76 20.846 11.888 20.7286 11.984C20.6113 12.0693 20.446 12.112 20.2326 12.112C19.998 12.112 19.8113 12.0533 19.6726 11.936C19.534 11.8187 19.4113 11.6373 19.3046 11.392L18.1846 8.8L18.9366 9.248H12.1206L12.8566 8.8L11.7526 11.392C11.646 11.648 11.5286 11.8347 11.4006 11.952C11.2726 12.0587 11.102 12.112 10.8886 12.112ZM15.5126 2.56L13.0966 8.288L12.6966 7.904H18.3446L17.9766 8.288L15.5446 2.56H15.5126ZM26.3845 12.144C25.8938 12.144 25.4138 12.1067 24.9445 12.032C24.4752 11.9573 24.0325 11.8453 23.6165 11.696C23.2005 11.536 22.8272 11.344 22.4965 11.12C22.3365 11.0027 22.2245 10.8693 22.1605 10.72C22.1072 10.5707 22.0912 10.4267 22.1125 10.288C22.1445 10.1387 22.2085 10.0107 22.3045 9.904C22.4005 9.79733 22.5178 9.73333 22.6565 9.712C22.7952 9.68 22.9498 9.72267 23.1205 9.84C23.6005 10.1493 24.1072 10.3787 24.6405 10.528C25.1738 10.6667 25.7552 10.736 26.3845 10.736C27.2912 10.736 27.9578 10.576 28.3845 10.256C28.8218 9.92533 29.0405 9.49867 29.0405 8.976C29.0405 8.54933 28.8858 8.21333 28.5765 7.968C28.2672 7.712 27.7498 7.50933 27.0245 7.36L25.3125 7.008C24.2992 6.79467 23.5418 6.44267 23.0405 5.952C22.5498 5.46133 22.3045 4.8 22.3045 3.968C22.3045 3.46667 22.4058 3.008 22.6085 2.592C22.8218 2.176 23.1152 1.81867 23.4885 1.52C23.8618 1.21067 24.3098 0.976 24.8325 0.815999C25.3552 0.655999 25.9258 0.575999 26.5445 0.575999C27.2058 0.575999 27.8245 0.661333 28.4005 0.832C28.9872 1.00267 29.5098 1.264 29.9685 1.616C30.1072 1.712 30.1978 1.83467 30.2405 1.984C30.2938 2.12267 30.3045 2.26133 30.2725 2.4C30.2512 2.53867 30.1925 2.656 30.0965 2.752C30.0005 2.848 29.8778 2.90667 29.7285 2.928C29.5792 2.93867 29.4138 2.88533 29.2325 2.768C28.8165 2.49067 28.3898 2.29333 27.9525 2.176C27.5258 2.048 27.0512 1.984 26.5285 1.984C26.0058 1.984 25.5472 2.064 25.1525 2.224C24.7685 2.384 24.4698 2.608 24.2565 2.896C24.0538 3.184 23.9525 3.52533 23.9525 3.92C23.9525 4.368 24.0965 4.72533 24.3845 4.992C24.6725 5.25867 25.1525 5.46133 25.8245 5.6L27.5205 5.952C28.5872 6.176 29.3818 6.52267 29.9045 6.992C30.4272 7.46133 30.6885 8.08533 30.6885 8.864C30.6885 9.36533 30.5872 9.81867 30.3845 10.224C30.1818 10.6187 29.8938 10.96 29.5205 11.248C29.1472 11.536 28.6938 11.76 28.1605 11.92C27.6378 12.0693 27.0458 12.144 26.3845 12.144ZM35.9273 12.112C35.6606 12.112 35.4526 12.0373 35.3033 11.888C35.1646 11.7387 35.0953 11.5307 35.0953 11.264V2.112H31.7033C31.4793 2.112 31.3033 2.05333 31.1753 1.936C31.0473 1.808 30.9832 1.632 30.9832 1.408C30.9832 1.184 31.0473 1.01333 31.1753 0.896C31.3033 0.778666 31.4793 0.719999 31.7033 0.719999H40.1353C40.3699 0.719999 40.5513 0.778666 40.6793 0.896C40.8073 1.01333 40.8713 1.184 40.8713 1.408C40.8713 1.632 40.8073 1.808 40.6793 1.936C40.5513 2.05333 40.3699 2.112 40.1353 2.112H36.7433V11.264C36.7433 11.5307 36.6739 11.7387 36.5353 11.888C36.4073 12.0373 36.2046 12.112 35.9273 12.112ZM43.0205 12C42.7325 12 42.5085 11.9253 42.3485 11.776C42.1992 11.616 42.1245 11.392 42.1245 11.104V1.616C42.1245 1.328 42.1992 1.10933 42.3485 0.959999C42.5085 0.799999 42.7325 0.719999 43.0205 0.719999H48.8605C49.0845 0.719999 49.2552 0.778666 49.3725 0.896C49.4898 1.00267 49.5485 1.16267 49.5485 1.376C49.5485 1.6 49.4898 1.77067 49.3725 1.888C49.2552 2.00533 49.0845 2.064 48.8605 2.064H43.7245V5.6H48.5085C48.7432 5.6 48.9138 5.65867 49.0205 5.776C49.1378 5.89333 49.1965 6.05867 49.1965 6.272C49.1965 6.496 49.1378 6.66667 49.0205 6.784C48.9138 6.89067 48.7432 6.944 48.5085 6.944H43.7245V10.656H48.8605C49.0845 10.656 49.2552 10.7147 49.3725 10.832C49.4898 10.9493 49.5485 11.1147 49.5485 11.328C49.5485 11.552 49.4898 11.7227 49.3725 11.84C49.2552 11.9467 49.0845 12 48.8605 12H43.0205ZM52.3784 12.112C52.1117 12.112 51.9037 12.0373 51.7544 11.888C51.6157 11.7387 51.5464 11.5307 51.5464 11.264V1.568C51.5464 1.29067 51.621 1.08267 51.7704 0.943999C51.9197 0.794666 52.1277 0.719999 52.3944 0.719999H56.2184C57.4344 0.719999 58.373 1.008 59.0344 1.584C59.6957 2.16 60.0264 2.976 60.0264 4.032C60.0264 4.71467 59.877 5.30133 59.5784 5.792C59.2797 6.28267 58.8424 6.656 58.2664 6.912C57.701 7.168 57.0184 7.296 56.2184 7.296L56.3624 7.072H56.7784C57.205 7.072 57.573 7.17867 57.8824 7.392C58.2024 7.60533 58.4904 7.94667 58.7464 8.416L60.1224 10.976C60.229 11.168 60.277 11.3547 60.2664 11.536C60.2664 11.7067 60.2024 11.8453 60.0744 11.952C59.957 12.0587 59.7864 12.112 59.5624 12.112C59.3277 12.112 59.1357 12.064 58.9864 11.968C58.8477 11.8613 58.7197 11.7067 58.6024 11.504L56.9224 8.4C56.6984 7.984 56.4424 7.70667 56.1544 7.568C55.8664 7.41867 55.4877 7.344 55.0184 7.344H53.2104V11.264C53.2104 11.5307 53.141 11.7387 53.0024 11.888C52.8637 12.0373 52.6557 12.112 52.3784 12.112ZM53.2104 6.096H55.9464C56.757 6.096 57.3704 5.92533 57.7864 5.584C58.2024 5.24267 58.4104 4.736 58.4104 4.064C58.4104 3.40267 58.2024 2.90133 57.7864 2.56C57.3704 2.21867 56.757 2.048 55.9464 2.048H53.2104V6.096ZM63.2705 12C62.9825 12 62.7585 11.9253 62.5985 11.776C62.4492 11.616 62.3745 11.392 62.3745 11.104V1.616C62.3745 1.328 62.4492 1.10933 62.5985 0.959999C62.7585 0.799999 62.9825 0.719999 63.2705 0.719999H69.1105C69.3345 0.719999 69.5052 0.778666 69.6225 0.896C69.7398 1.00267 69.7985 1.16267 69.7985 1.376C69.7985 1.6 69.7398 1.77067 69.6225 1.888C69.5052 2.00533 69.3345 2.064 69.1105 2.064H63.9745V5.6H68.7585C68.9932 5.6 69.1638 5.65867 69.2705 5.776C69.3878 5.89333 69.4465 6.05867 69.4465 6.272C69.4465 6.496 69.3878 6.66667 69.2705 6.784C69.1638 6.89067 68.9932 6.944 68.7585 6.944H63.9745V10.656H69.1105C69.3345 10.656 69.5052 10.7147 69.6225 10.832C69.7398 10.9493 69.7985 11.1147 69.7985 11.328C69.7985 11.552 69.7398 11.7227 69.6225 11.84C69.5052 11.9467 69.3345 12 69.1105 12H63.2705ZM71.7986 12.112C71.5853 12.112 71.4093 12.0587 71.2706 11.952C71.132 11.8347 71.052 11.6907 71.0306 11.52C71.0093 11.3387 71.068 11.1573 71.2066 10.976L74.9826 5.904V6.576L71.4146 1.776C71.276 1.584 71.212 1.39733 71.2226 1.216C71.244 1.03467 71.324 0.890666 71.4626 0.783999C71.6013 0.666666 71.772 0.608 71.9746 0.608C72.1453 0.608 72.2946 0.650666 72.4226 0.735999C72.5613 0.810666 72.7 0.944 72.8386 1.136L75.9426 5.392H75.4306L78.5026 1.136C78.6413 0.944 78.7746 0.810666 78.9026 0.735999C79.0413 0.650666 79.2013 0.608 79.3826 0.608C79.596 0.608 79.772 0.666666 79.9106 0.783999C80.0493 0.890666 80.124 1.03467 80.1346 1.216C80.156 1.38667 80.092 1.57333 79.9426 1.776L76.3746 6.576V5.904L80.1346 10.976C80.2733 11.1573 80.332 11.3387 80.3106 11.52C80.3 11.6907 80.2253 11.8347 80.0866 11.952C79.948 12.0587 79.7666 12.112 79.5426 12.112C79.3826 12.112 79.2333 12.0693 79.0946 11.984C78.956 11.8987 78.812 11.7653 78.6626 11.584L75.3666 7.072H75.9746L72.6946 11.584C72.556 11.7653 72.412 11.8987 72.2626 11.984C72.124 12.0693 71.9693 12.112 71.7986 12.112ZM90.7719 12.112C90.5372 12.112 90.3399 12.0587 90.1799 11.952C90.0305 11.8347 89.9079 11.664 89.8119 11.44L85.5079 1.696C85.4225 1.472 85.4012 1.28 85.4439 1.12C85.4865 0.959999 85.5719 0.837333 85.6999 0.752C85.8385 0.656 86.0039 0.608 86.1959 0.608C86.4412 0.608 86.6279 0.661333 86.7559 0.768C86.8839 0.874666 86.9905 1.03467 87.0759 1.248L91.1079 10.592H90.5159L94.5159 1.232C94.6119 1.02933 94.7239 0.874666 94.8519 0.768C94.9905 0.661333 95.1772 0.608 95.4119 0.608C95.6039 0.608 95.7585 0.656 95.8759 0.752C96.0039 0.837333 96.0839 0.959999 96.1159 1.12C96.1479 1.28 96.1159 1.472 96.0199 1.696L91.7319 11.44C91.6359 11.664 91.5132 11.8347 91.3639 11.952C91.2145 12.0587 91.0172 12.112 90.7719 12.112ZM98.519 12.112C98.2523 12.112 98.0443 12.0373 97.895 11.888C97.7563 11.7387 97.687 11.5307 97.687 11.264V1.456C97.687 1.17867 97.7563 0.970666 97.895 0.832C98.0443 0.682666 98.2523 0.608 98.519 0.608C98.7857 0.608 98.9883 0.682666 99.127 0.832C99.2763 0.970666 99.351 1.17867 99.351 1.456V11.264C99.351 11.5307 99.2817 11.7387 99.143 11.888C99.0043 12.0373 98.7963 12.112 98.519 12.112ZM102.864 12C102.576 12 102.352 11.9253 102.192 11.776C102.043 11.616 101.968 11.392 101.968 11.104V1.616C101.968 1.328 102.043 1.10933 102.192 0.959999C102.352 0.799999 102.576 0.719999 102.864 0.719999H108.704C108.928 0.719999 109.099 0.778666 109.216 0.896C109.334 1.00267 109.392 1.16267 109.392 1.376C109.392 1.6 109.334 1.77067 109.216 1.888C109.099 2.00533 108.928 2.064 108.704 2.064H103.568V5.6H108.352C108.587 5.6 108.758 5.65867 108.864 5.776C108.982 5.89333 109.04 6.05867 109.04 6.272C109.04 6.496 108.982 6.66667 108.864 6.784C108.758 6.89067 108.587 6.944 108.352 6.944H103.568V10.656H108.704C108.928 10.656 109.099 10.7147 109.216 10.832C109.334 10.9493 109.392 11.1147 109.392 11.328C109.392 11.552 109.334 11.7227 109.216 11.84C109.099 11.9467 108.928 12 108.704 12H102.864ZM115.104 12.112C114.869 12.112 114.677 12.0533 114.528 11.936C114.389 11.8187 114.272 11.6373 114.176 11.392L110.736 1.584C110.64 1.30667 110.656 1.07733 110.784 0.896C110.923 0.704 111.147 0.608 111.456 0.608C111.691 0.608 111.872 0.661333 112 0.768C112.139 0.874666 112.245 1.04533 112.32 1.28L115.44 10.464H114.848L118.048 1.312C118.144 1.07733 118.256 0.901333 118.384 0.783999C118.512 0.666666 118.683 0.608 118.896 0.608C119.109 0.608 119.275 0.666666 119.392 0.783999C119.52 0.901333 119.632 1.08267 119.728 1.328L122.864 10.464H122.336L125.488 1.28C125.563 1.056 125.664 0.890666 125.792 0.783999C125.931 0.666666 126.112 0.608 126.336 0.608C126.613 0.608 126.816 0.704 126.944 0.896C127.083 1.07733 127.099 1.30667 126.992 1.584L123.536 11.408C123.44 11.6427 123.323 11.8187 123.184 11.936C123.045 12.0533 122.859 12.112 122.624 12.112C122.379 12.112 122.187 12.0533 122.048 11.936C121.909 11.8187 121.797 11.6373 121.712 11.392L118.688 2.736H119.04L115.984 11.408C115.899 11.6427 115.787 11.8187 115.648 11.936C115.52 12.0533 115.339 12.112 115.104 12.112ZM129.927 12C129.639 12 129.415 11.9253 129.255 11.776C129.105 11.616 129.031 11.392 129.031 11.104V1.616C129.031 1.328 129.105 1.10933 129.255 0.959999C129.415 0.799999 129.639 0.719999 129.927 0.719999H135.767C135.991 0.719999 136.161 0.778666 136.279 0.896C136.396 1.00267 136.455 1.16267 136.455 1.376C136.455 1.6 136.396 1.77067 136.279 1.888C136.161 2.00533 135.991 2.064 135.767 2.064H130.631V5.6H135.415C135.649 5.6 135.82 5.65867 135.927 5.776C136.044 5.89333 136.103 6.05867 136.103 6.272C136.103 6.496 136.044 6.66667 135.927 6.784C135.82 6.89067 135.649 6.944 135.415 6.944H130.631V10.656H135.767C135.991 10.656 136.161 10.7147 136.279 10.832C136.396 10.9493 136.455 11.1147 136.455 11.328C136.455 11.552 136.396 11.7227 136.279 11.84C136.161 11.9467 135.991 12 135.767 12H129.927ZM139.285 12.112C139.018 12.112 138.81 12.0373 138.661 11.888C138.522 11.7387 138.453 11.5307 138.453 11.264V1.568C138.453 1.29067 138.527 1.08267 138.677 0.943999C138.826 0.794666 139.034 0.719999 139.301 0.719999H143.125C144.341 0.719999 145.279 1.008 145.941 1.584C146.602 2.16 146.933 2.976 146.933 4.032C146.933 4.71467 146.783 5.30133 146.485 5.792C146.186 6.28267 145.749 6.656 145.173 6.912C144.607 7.168 143.925 7.296 143.125 7.296L143.269 7.072H143.685C144.111 7.072 144.479 7.17867 144.789 7.392C145.109 7.60533 145.397 7.94667 145.653 8.416L147.029 10.976C147.135 11.168 147.183 11.3547 147.173 11.536C147.173 11.7067 147.109 11.8453 146.981 11.952C146.863 12.0587 146.693 12.112 146.469 12.112C146.234 12.112 146.042 12.064 145.893 11.968C145.754 11.8613 145.626 11.7067 145.509 11.504L143.829 8.4C143.605 7.984 143.349 7.70667 143.061 7.568C142.773 7.41867 142.394 7.344 141.925 7.344H140.117V11.264C140.117 11.5307 140.047 11.7387 139.909 11.888C139.77 12.0373 139.562 12.112 139.285 12.112ZM140.117 6.096H142.853C143.663 6.096 144.277 5.92533 144.693 5.584C145.109 5.24267 145.317 4.736 145.317 4.064C145.317 3.40267 145.109 2.90133 144.693 2.56C144.277 2.21867 143.663 2.048 142.853 2.048H140.117V6.096Z" fill="#31BD59"/>
                </svg>
                <svg (click)="onCloseClick()" style="cursor: pointer;" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 4L4 12" stroke="#333C4E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M4 4L12 12" stroke="#333C4E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>

            <hr/>

            <div class="compared-files">
                <span class="label">Compared files:</span>
                <div style="display: flex; align-items: center; gap: 6px; border-radius: 6px; background-color: #F4F4F4; padding: 4px 8px;">
                    <span style="cursor: pointer;" (click)="onFileClick(2)">Comparison 1</span>
                    <div class="file-info" [class.active-tab]="activeFileIndex == 1" (click)="onFileClick(1)">
                        <span class="color" [ngStyle]="{ 'background-color': comparison?.activeColor?.value || '#0E3BD8' }"></span>
                        <span class="file-name">{{overlayDocument?.name}} / Rev.{{overlayDocument?.version || 0}}</span>
                    </div>
                    <div class="file-info" [class.active-tab]="activeFileIndex == 0" (click)="onFileClick(0)">
                        <span class="color" [ngStyle]="{ 'background-color': comparison?.otherColor?.value || '#E86767' }"></span>
                        <span class="file-name">{{backgroundDocument?.name}} / Rev.{{backgroundDocument?.version || 0}}</span>
                    </div>
                </div>
                <div *ngIf="isExpandedView" style="flex-grow: 1; display: flex; align-items: center; justify-content: flex-end; gap: 24px">
                    <div *ngIf="comparison" style="display: flex; align-items: center; gap: 8px;">
                        <span style="color: #0D41F9; font-size: 14px;">Open in viewer</span>
                        <svg (click)="onOpenInViewerClick()" style="cursor: pointer;" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.6641 8.33268V15.8327C16.6641 16.0537 16.5763 16.2657 16.42 16.4219C16.2637 16.5782 16.0517 16.666 15.8307 16.666H4.16406C3.94305 16.666 3.73109 16.5782 3.57481 16.4219C3.41853 16.2657 3.33073 16.0537 3.33073 15.8327V4.16602C3.33073 3.945 3.41853 3.73304 3.57481 3.57676C3.73109 3.42048 3.94305 3.33268 4.16406 3.33268H11.6641C11.8851 3.33268 12.097 3.24489 12.2533 3.0886C12.4096 2.93232 12.4974 2.72036 12.4974 2.49935C12.4974 2.27834 12.4096 2.06637 12.2533 1.91009C12.097 1.75381 11.8851 1.66602 11.6641 1.66602H4.16406C3.50102 1.66602 2.86514 1.92941 2.3963 2.39825C1.92745 2.86709 1.66406 3.50297 1.66406 4.16602V15.8327C1.66406 16.4957 1.92745 17.1316 2.3963 17.6005C2.86514 18.0693 3.50102 18.3327 4.16406 18.3327H15.8307C16.4938 18.3327 17.1297 18.0693 17.5985 17.6005C18.0673 17.1316 18.3307 16.4957 18.3307 15.8327V8.33268C18.3307 8.11167 18.2429 7.89971 18.0867 7.74343C17.9304 7.58715 17.7184 7.49935 17.4974 7.49935C17.2764 7.49935 17.0644 7.58715 16.9081 7.74343C16.7519 7.89971 16.6641 8.11167 16.6641 8.33268Z" fill="#0D41F9"/>
                            <path d="M17.5008 1.66602H15.0008C14.7798 1.66602 14.5678 1.75381 14.4115 1.91009C14.2553 2.06637 14.1675 2.27834 14.1675 2.49935C14.1675 2.72036 14.2553 2.93232 14.4115 3.0886C14.5678 3.24489 14.7798 3.33268 15.0008 3.33268H15.4925L9.40914 9.40768C9.25222 9.5646 9.16406 9.77743 9.16406 9.99935C9.16406 10.2213 9.25222 10.4341 9.40914 10.591C9.56606 10.7479 9.77889 10.8361 10.0008 10.8361C10.2227 10.8361 10.4356 10.7479 10.5925 10.591L16.6675 4.50768V4.99935C16.6675 5.22036 16.7553 5.43232 16.9115 5.5886C17.0678 5.74488 17.2798 5.83268 17.5008 5.83268C17.7218 5.83268 17.9338 5.74488 18.0901 5.5886C18.2463 5.43232 18.3341 5.22036 18.3341 4.99935V2.49935C18.3341 2.27834 18.2463 2.06637 18.0901 1.91009C17.9338 1.75381 17.7218 1.66602 17.5008 1.66602Z" fill="#0D41F9"/>
                        </svg>
                    </div>
                    <button *ngIf="comparison" (click)="onSavaAsPDFClick()" class="btn btn-primary">Save as PDF</button>
                </div>
            </div>
        </div>

        <div *ngIf="!isExpandedView" style="position: relative; width: 100%;">
            <div style="position: absolute; display: flex; align-items: center;gap: 8px;color: #0D41F9; font-size: 14px; z-index: 1; top: 26px; right: 32px;">
                Expand view 
                <svg (click)="onExpandViewClick()"
                style="cursor: pointer;" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 1.09375C7.63792 1.09375 5.37258 2.03208 3.70233 3.70233C2.03208 5.37258 1.09375 7.63792 1.09375 10C1.09375 12.3621 2.03208 14.6274 3.70233 16.2977C5.37258 17.9679 7.63792 18.9062 10 18.9062C12.3621 18.9062 14.6274 17.9679 16.2977 16.2977C17.9679 14.6274 18.9062 12.3621 18.9062 10C18.9062 7.63792 17.9679 5.37258 16.2977 3.70233C14.6274 2.03208 12.3621 1.09375 10 1.09375ZM15.5594 8.325C15.5594 8.38656 15.5473 8.44751 15.5237 8.50438C15.5001 8.56125 15.4656 8.61293 15.4221 8.65646C15.3786 8.69998 15.3269 8.73451 15.27 8.75807C15.2131 8.78163 15.1522 8.79375 15.0906 8.79375C15.0291 8.79375 14.9681 8.78163 14.9112 8.75807C14.8544 8.73451 14.8027 8.69998 14.7592 8.65646C14.7156 8.61293 14.6811 8.56125 14.6576 8.50438C14.634 8.44751 14.6219 8.38656 14.6219 8.325V6.04063L10.6625 10L14.6219 13.9594V11.675C14.6219 11.5507 14.6713 11.4315 14.7592 11.3435C14.8471 11.2556 14.9663 11.2063 15.0906 11.2063C15.2149 11.2063 15.3342 11.2556 15.4221 11.3435C15.51 11.4315 15.5594 11.5507 15.5594 11.675V15.4031C15.5586 15.4443 15.5419 15.4836 15.5127 15.5127C15.4836 15.5419 15.4443 15.5586 15.4031 15.5594H11.675C11.5507 15.5594 11.4315 15.51 11.3435 15.4221C11.2556 15.3342 11.2063 15.2149 11.2063 15.0906C11.2063 14.9663 11.2556 14.8471 11.3435 14.7592C11.4315 14.6713 11.5507 14.6219 11.675 14.6219H13.9594L10 10.6625L6.04063 14.6219H8.325C8.38656 14.6219 8.44751 14.634 8.50438 14.6576C8.56125 14.6811 8.61293 14.7156 8.65646 14.7592C8.69998 14.8027 8.73451 14.8544 8.75807 14.9112C8.78163 14.9681 8.79375 15.0291 8.79375 15.0906C8.79375 15.1522 8.78163 15.2131 8.75807 15.27C8.73451 15.3269 8.69998 15.3786 8.65646 15.4221C8.61293 15.4656 8.56125 15.5001 8.50438 15.5237C8.44751 15.5473 8.38656 15.5594 8.325 15.5594H4.59687C4.55569 15.5586 4.51641 15.5419 4.48727 15.5127C4.45814 15.4836 4.44143 15.4443 4.44062 15.4031V11.675C4.44062 11.5507 4.49001 11.4315 4.57792 11.3435C4.66583 11.2556 4.78505 11.2063 4.90937 11.2063C5.0337 11.2063 5.15292 11.2556 5.24083 11.3435C5.32874 11.4315 5.37812 11.5507 5.37812 11.675V13.9594L9.3375 10L5.37812 6.04063V8.325C5.37812 8.44932 5.32874 8.56855 5.24083 8.65646C5.15292 8.74436 5.0337 8.79375 4.90937 8.79375C4.78505 8.79375 4.66583 8.74436 4.57792 8.65646C4.49001 8.56855 4.44062 8.44932 4.44062 8.325V4.59687C4.44143 4.55569 4.45814 4.51641 4.48727 4.48727C4.51641 4.45814 4.55569 4.44143 4.59687 4.44062H8.325C8.44932 4.44062 8.56855 4.49001 8.65646 4.57792C8.74436 4.66583 8.79375 4.78505 8.79375 4.90937C8.79375 5.0337 8.74436 5.15292 8.65646 5.24083C8.56855 5.32874 8.44932 5.37812 8.325 5.37812H6.04063L10 9.3375L13.9594 5.37812H11.675C11.5507 5.37812 11.4315 5.32874 11.3435 5.24083C11.2556 5.15292 11.2063 5.0337 11.2063 4.90937C11.2063 4.78505 11.2556 4.66583 11.3435 4.57792C11.4315 4.49001 11.5507 4.44062 11.675 4.44062H15.4031C15.4443 4.44143 15.4836 4.45814 15.5127 4.48727C15.5419 4.51641 15.5586 4.55569 15.5594 4.59687V8.325Z" fill="#0D41F9"/>
                </svg>
            </div>
        </div>

        <div *ngIf="isExpandedView" style="position: relative; width: 100%; box-sizing: border-box; display: flex;">
            <div style="position: absolute; display: flex; align-items: center;gap: 8px;color: #0D41F9; font-size: 14px; z-index: 1; top: 26px; right: 32px;">
                Minimize view
                <svg (click)="onMinimizeViewClick()" style="cursor: pointer;" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10ZM13.8912 8.98505C13.8912 8.74897 13.6998 8.55759 13.4638 8.55759H12.0503L15.7036 4.90426C15.8705 4.73743 15.8705 4.46695 15.7036 4.30012C15.5368 4.13329 15.2663 4.13329 15.0995 4.30012L11.4462 7.95345V6.53999C11.4462 6.30391 11.2548 6.11254 11.0187 6.11254C10.7826 6.11254 10.5912 6.30391 10.5912 6.53999V9.41251H13.4638C13.6998 9.41251 13.8912 9.22113 13.8912 8.98505ZM6.54195 11.4419C6.30587 11.4419 6.11449 11.2505 6.11449 11.0144C6.11449 10.7783 6.30587 10.5869 6.54195 10.5869H9.41446V13.4595C9.41446 13.6955 9.22308 13.8869 8.987 13.8869C8.75092 13.8869 8.55954 13.6955 8.55954 13.4595V12.046L4.90621 15.6993C4.73938 15.8662 4.4689 15.8662 4.30207 15.6993C4.13524 15.5325 4.13524 15.262 4.30207 15.0952L7.9554 11.4419H6.54195ZM8.55954 7.95345L4.90621 4.30012C4.73938 4.13329 4.4689 4.13329 4.30207 4.30012C4.13524 4.46695 4.13524 4.73743 4.30207 4.90426L7.9554 8.55759H6.54195C6.30587 8.55759 6.11449 8.74897 6.11449 8.98505C6.11449 9.22113 6.30587 9.41251 6.54195 9.41251H9.41446V6.53999C9.41446 6.30391 9.22308 6.11254 8.987 6.11254C8.75092 6.11254 8.55954 6.30391 8.55954 6.53999V7.95345ZM13.8912 11.0144C13.8912 11.2505 13.6998 11.4419 13.4638 11.4419H12.0503L15.7036 15.0952C15.8705 15.262 15.8705 15.5325 15.7036 15.6993C15.5368 15.8662 15.2663 15.8662 15.0995 15.6993L11.4462 12.046V13.4595C11.4462 13.6955 11.2548 13.8869 11.0187 13.8869C10.7826 13.8869 10.5912 13.6955 10.5912 13.4595V10.5869H13.4638C13.6998 10.5869 13.8912 10.7783 13.8912 11.0144Z" fill="#0D41F9"/>
                </svg>
            </div>
        </div>

        <div class="iframe-wrapper">
            <co-simple-progress *ngIf="isProgress" class="iframe-loader">
                {{progressMessage}}
            </co-simple-progress>
            <iframe #iframe [src]="webViewerUrlQ" (load)="onIframeLoad()"></iframe>
        </div>

        <ng-container *ngIf="!isExpandedView">
            <hr />

            <div style="width: 100%; display: flex; align-items: center; justify-content: flex-end;">
                <button (click)="onSavaAsPDFClick()" class="btn btn-primary">Save as PDF</button>
            </div>

            <div class="footer-wrapper">
                <span style="color: #7A818D;font-size: 12px;">Go to full screen to use all available comparison functions.</span>
            </div>
        </ng-container>
    </div>
</div>